<html>
<head>
<title>LD-title</title>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">

<link rel="stylesheet" href="./stylesheets/all.css" />

<script>window.config = {}</script>
<script src="./javascripts/common.js"></script>
<script src="./javascripts/title.js"></script>

</head>
<body class="">
<style>

@-webkit-keyframes title-appear {
    0% { opacity: 0; transform: translate(0, 10px); }
}

@-webkit-keyframes float {
    50% { transform: scale(0.97, 1.03); }
}

@-webkit-keyframes disappear {
    0% { opacity: 1; transform: translate(0,  0px); }
    100% { opacity: 0; transform: translate(0, 10px); }
}

.title-logo {
    position: absolute;
    left: 7.5%;
    width: 85%;
    max-height: 300px;
    top: 50px;
}

.touch-here {
    position: absolute;
    top: 400px;
    width: 100%;
    text-align: center;
    text-weight: bold;
    font-size: 1.5em;
    font-family: 'sans-serif';
}

</style>

<script>

var menuButton;

var reset;

pages.title = (function () {

    var exports = {};

    exports.main = function () {

        loadImage('images/title-logo.svg', 'title-logo elem', '#main').then(function ($img) {

            return $img.anim('title-appear', 2000).then(function () {
                return $img.animation('float 6000ms infinite');
            });
        })
        
        wait(500).then(function () {

            var $p = $('<p />').text('GET UP').addClass('touch-here elem').appendTo('#main');

            $p.click(goToMap);

            return $p.anim('title-appear', 1000).then(function () {
                $p.animation('float 1000ms infinite');
            });

        }).then(function () {

            menuButton.show();

        });

        menuButton = menuButton || $('.menu-button').menuButton($('#title-menu'));

        reset = function () {

            thingsGoOut().then(function () {
                pages.title.main();
            });
        };

        $('.reset').on('click', reset);

        var thingsGoOut = function () {

            $('.reset').off('click', reset);

            menuButton.hide();

            return $('.elem').css('opacity', 0).anim('disappear', 500).then(function () {
                $('.elem').remove();

                return wait(100);
            });
        };

        var goToMap = function () {

            thingsGoOut().then(function () {

                return ui.common.BackgroundService.turnBlack();

            }).then(function () {

                location.href = 'map.html';

            });

        };
    };

    return exports;

}());

$(pages.title.main);

</script>

<div id="main">

</div>

<img class="menu-button menu-hidden" src="images/menu-button.svg" />

<menus id="title-menu">
  <menu src="images/reset-button.svg" onclick="reset();"></menu>
  <menu src="images/reset-button.svg" onclick="reset();"></menu>
  <menu src="images/menu-button.svg">
    <menu src="images/reset-button.svg" onclick="reset();"></menu>
    <menu src="images/menu-button.svg">
      <menu src="images/reset-button.svg" onclick="reset();"></menu>
      <menu src="images/reset-button.svg" onclick="reset();"></menu>
      <menu src="images/reset-button.svg" onclick="reset();"></menu>
      <menu src="images/back-button.svg" onclick="history.back()"></menu>
    </menu>
  </menu>
  <menu src="images/back-button.svg" onclick="history.back()"></menu>
</menus>

</body>
</html>
