scene.map.MapScene=function(t){"use strict";var n=function(){this.floor=new domain.map.Floor,this.wall=new domain.map.Wall,this.wall.loadFromObjectList(window.woList),this.menuButton=t(".menu-button").menuButton(t("#map-menu")),this.lifeButton={}},i=n.prototype=new scene.common.Scene;return i.start=function(){var t=this;return pages.common.BackgroundService.turnWhite().then(function(){return t.floor.appear()}).then(function(){return t.wall.appear()}).then(function(){return t.menuButton.show()})},i.fadeOut=function(){this.menuButton.hide();var t=this;return wait().then(function(){return t.floor.disappear()}).then(function(){return pages.common.BackgroundService.turnBlack()})},n}(window.jQuery),domain.map.WallObject=function(t){"use strict";var n=function(){},i=n.prototype;return i.setParent=function(t){return this.parent=t,this},i.setPos=function(t){return this.x=t[0],this.y=t[1],this},i.rightLimit=function(){return this.x+this.w},i.setSize=function(t){return this.w=t[0],this.h=t[1],this},i.createDom=function(){return t("<div />").css({backgroundColor:"black",opcaity:0})},i.appear=function(){return this.$dom=this.$dom||this.createDom().width(this.w).height(this.h).offset({left:this.x,top:this.y}).appendTo(this.parent),this.$dom.anim(this.appearAnim,this.appearDur)},i.disappear=function(){var t=this;return this.$dom.anim(this.disappearAnim,this.disappearDur).then(function(){t.$dom.remove()})},n}(window.jQuery),domain.map.Door=function(t){"use strict";var n=400,i=function(t,n,i){this.name=t,this.star=n,this.score=i};i.createFromObject=function(t){return new i(t.name,t.star,t.score).setPos(t.pos).setSize(t.size)};var o=i.prototype=new domain.map.WallObject;return o.createDom=function(){return t("<div />").addClass("door").css("opcaity",0)},o.appearAnim="door-appear",o.appearDur=n,o.disappearAnim="door-disappear",o.disappearDur=n,i}(window.jQuery),domain.map.Floor=function(t){"use strict";var n=400,i=function(){this.$dom=t(".floor")};i.HEIGHT_RATE=.35;var o=i.prototype;return o.appear=function(){return this.$dom.removeClass("floor-hidden"),this.$dom.anim("floor-appear",n)},o.disappear=function(){var t=this;return t.$dom.addClass("floor-hidden"),this.$dom.anim("floor-disappear",n).then(function(){})},i}(window.jQuery);var h=100,w=70;window.woList=[{type:"l",name:"0",pos:[100,-h],size:[w,h],star:3,score:5e3},{type:"l",name:"1",pos:[300,-h],size:[w,h],star:3,score:5e3},{type:"l",name:"2",pos:[500,-h],size:[w,h],star:3,score:5e3},{type:"l",name:"3",pos:[700,-h],size:[w,h],star:3,score:5e3}],domain.map.Wall=function(t){"use strict";var n=function(){this.wos=[],this.groundLevel=t(window).height()*(1-domain.map.Floor.HEIGHT_RATE),this.$dom=t(".floor-wrapper")},i=n.prototype;return i.loadFromObjectList=function(t){var n=this;this.wos=t.map(function(t){return n.transformCoordinates(t),domain.map.Door.createFromObject(t).setParent(n.$dom)}),this.expandRightLimit(100)},i.transformCoordinates=function(t){t.pos[1]+=this.groundLevel},i.expandRightLimit=function(n){var i=this.rightLimit()+n;t("<div />").appendTo(this.$dom).css({width:"1px",height:"1px",position:"absolute"}).offset({left:i,top:this.groundLevel})},i.rightLimit=function(){return Math.max.apply(Math,this.wos.map(function(t){return t.rightLimit()}))},i.appear=function(){var t=Promise.resolve();return this.wos.forEach(function(n){t=t.then(function(){return n.appear(),wait(100)})}),t},i.disappear=function(){},n}(window.jQuery);